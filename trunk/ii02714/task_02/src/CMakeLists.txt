cmake_minimum_required(VERSION 3.14)  # üîß –û–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

project(task_02)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –∫–ª–∞—Å—Å–æ–º Obj
add_library(solution STATIC Solution.cpp)
target_include_directories(solution PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})

# –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
add_executable(task_02 otis2.cpp)
target_link_libraries(task_02 PRIVATE solution)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Test
include(FetchContent)
FetchContent_Declare(
    googletest
    URL https://github.com/google/googletest/archive/refs/tags/v1.15.2.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

enable_testing()

# –¢–µ—Å—Ç—ã
add_executable(runTests test/test.cpp)  # üîß –£—Ç–æ—á–Ω—ë–Ω –ø—É—Ç—å –∫ —Ç–µ—Å—Ç—É
target_link_libraries(runTests PRIVATE solution gtest gtest_main)

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
include(GoogleTest)
gtest_discover_tests(runTests)
